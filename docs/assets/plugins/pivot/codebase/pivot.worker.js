/*
@license
Webix Pivot v.4.3.0
This software is covered by Webix Trial License.
Usage without proper license is prohibited.
(c) XB Software Ltd.
*/
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/codebase/",e(0)}([function(t,e,n){"use strict";var r,o=n(16);onmessage=function(t){r||(r=new o.WebixPivot(t.data.structure)),r.config.footer=t.data.footer,r.config.structure=t.data.structure;var e=r.getData(t.data.data);postMessage({data:e.data,id:t.data.id})}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.WebixPivot=e._Pivot=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(17),l=n(24),f=n(18),c=r(f),p="_'_",d=e._Pivot=function(){function t(e,n){u(this,t),this.$divider=p,this._initOperations(),this.config=e,this.view=n,e.webWorker&&"undefined"!==!("undefined"==typeof Worker?"undefined":a(Worker))&&n?(this._pivotWorker=new Worker(e.webWorker),this._pivotWorker.onmessage=function(t){n._result&&!n.$destructed&&(n.callEvent("onWebWorkerEnd",[]),t.data.id&&t.data.id!==n._result_id||(n._result(t.data.data),n._result=null))}):this._pivotData=new s.Data(this,this.config),this.config.structure||(this.config.structure={}),c.extend(this.config.structure,{rows:[],columns:[],values:[],filters:[]})}return t.prototype._getPivotData=function(t,e,n){if(!this._pivotWorker){var r=this._pivotData.process(t,e);return n&&n(r),r}var o=this._result_id=webix.uid();this._result=n;var i=[],u=this.config.structure,a=this.config.footer;if(u&&(u.rows.length||u.columns.length))for(var s=e.length-1;s>=0;s--)i[s]=t[e[s]];this.callEvent("onWebWorkerStart",[]),this._pivotWorker.postMessage({footer:a,structure:u,data:i,id:o})},t.prototype._initOperations=function(){var t=this._pivotOperations=new l.Operations;this.operations=t.pull},t.prototype.addOperation=function(t,e,n){this._pivotOperations.add(t,e,n)},t.prototype.addTotalOperation=function(t,e,n){this._pivotOperations.addTotal(t,e,n)},t}();e.WebixPivot=function(t){function e(){return u(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.getData=function(t){var e,n,r,o,i=[],u={},a=this.config.structure.filters,s={},l={},f={},p=this.operations,d=[],h={};for(e=0;e<a.length;e++)a[e].type.indexOf("select")!=-1&&(l[a[e].name]=[],f[a[e].name]={});for(e=0;e<t.length;e++){if(n=t[e].id=t[e].id||c.uid(),s[n]=t[e],d.push(n),e<5)for(o in t[e])u[o]||(i.push(o),u[o]=c.uid());for(r in l){var v=t[e][r];c.isUndefined(v)||f[r][v]||(f[r][v]=1,l[r].push(v))}}h.options=l,h.fields=i,h.data=this._getPivotData(s,d),h.operations=[];for(n in p)h.operations.push(n);return h},e}(d)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.Data=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(18),s=r(a),l=n(19),f=n(20),c=n(21),p=n(22),d=r(p),h=n(23),v=r(h);e.Data=function(){function t(e,n){o(this,t),this.master=e,this.config=n,this.count=0,this.watch=new Date,this.ping=n.ping||this.ping}return t.prototype.process=function(t,e){var n,r,o,u,a,p=this.structure;for(p._header=[],p._header_hash={},v.formatFilterValues(p.filters),v.setFilterValues(p.filters),u=0;u<p.values.length;u++)p.values[u].operation=p.values[u].operation||["sum"],s.isArray(p.values[u].operation)||(p.values[u].operation=[p.values[u].operation]);for(n=[],u=0;u<p.columns.length;u++)n[u]="object"==i(p.columns[u])?p.columns[u].id||u:p.columns[u];return r=p.rows.concat(n),a=this.group(t,e,r),o={},p.rows.length>0?a=this.processRows(a,p.rows,p,o,""):(this.processColumns(a,n,p,o),a=[]),o=(0,l.processHeader)(this.master,o),a=(0,f.addTotalData)(this.master,a),this.config.footer&&(0,c.addFooter)(this.master,o,a),delete p._header,delete p._header_hash,{header:o,data:a}},t.prototype.processColumns=function(t,e,n,r,o,i){var u;if(o=o||{},e.length>0){i=i||"";for(var a in t)r[a]||(r[a]={}),t[a]=this.processColumns(t[a],e.slice(1),n,r[a],o,(i.length>0?i+this.divider:"")+a)}else{var l=n.values;for(var f in t)for(var c=0;c<l.length;c++)for(var p=0;p<l[c].operation.length;p++)u=i?i+this.divider+l[c].operation[p]+this.divider+l[c].name:l[c].operation[p]+this.divider+l[c].name,n._header_hash[u]||(n._header.push(u),n._header_hash[u]=!0),s.isUndefined(o[u])&&(o[u]=[],r[l[c].operation[p]+this.divider+l[c].name]={}),o[u].push({value:t[f][l[c].name],id:f})}return o},t.prototype.processRows=function(t,e,n,r,o){var i,u,a,l,f,c=[];if(e.length>1){for(i in t)t[i]=this.processRows(t[i],e.slice(1),n,r,o+"_"+i);var p=n._header;for(i in t){for(u={data:t[i]},a=0;a<u.data.length;a++)for(l=0;l<p.length;l++)f=p[l],s.isUndefined(u[f])&&(u[f]=[]),u[f].push(u.data[a][f]);this.setItemValues(u),this.master.config.stableRowId&&(u.id=i),u.name=i,u.open=!0,c.push(u)}}else for(i in t)u=this.processColumns(t[i],n.columns,n,r),u.name=i,this.master.config.stableRowId&&(u.id=o+"_"+i),this.setItemValues(u),c.push(u);return c},t.prototype.ping=function(){},t.prototype.setItemValues=function(t){return t=d.calculateItem(t,{header:this.structure._header,divider:this.divider,operations:this.operations},this),t=d.setMinMax(t,{header:this.structure._header,max:this.config.max,min:this.config.min,values:this.structure.values}),this.count>5e4&&(this.count=0,this.ping(this.watch)),t},t.prototype.group=function(t,e,n){var r,o,i,u={};for(r=0;r<e.length;r++)o=e[r],i=t[o],i&&v.filterItem(this.structure.filters,i,this.config.filterMap)&&this.groupItem(u,i,n);return u},t.prototype.groupItem=function(t,e,n){if(n.length){var r=e[n[0]];if("undefined"==typeof r)return null;s.isUndefined(t[r])&&(t[r]={}),this.groupItem(t[r],e,n.slice(1))}else t[e.id]=e},t.prototype.filterItem=function(t){for(var e=this.structure.filters||[],n=0;n<e.length;n++){var r=e[n];if(r.fvalue){if(s.isUndefined(t[r.name]))return!1;var o=t[r.name].toString().toLowerCase(),i=r.func(r.fvalue,o);if(!i)return!1}}return!0},u(t,[{key:"operations",get:function(){return this.master._pivotOperations}},{key:"divider",get:function(){return this.master.$divider}},{key:"structure",get:function(){return this.config.structure}}]),t}()},function(t,e){"use strict";function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"undefined"==typeof t}function o(t,e,n){for(var r in e)t[r]&&!n||(t[r]=e[r]);return t}function i(){return u||(u=(new Date).valueOf()),u++,u}e.__esModule=!0,e.isArray=n,e.isUndefined=r,e.extend=o,e.uid=i;var u},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){var n,r,o,i,u,l=t.config.structure.values;for(e=a(t.config.structure,e),e=s(t,e),n=0;n<e.length;n++){var f=[];for(r=0;r<e[n].length;r++)f.push(e[n][r].name);u=null;var p=f[f.length-1].split(t.$divider);for(r=0;r<l.length&&!u;r++)if(l[r].operation)for(o=0;o<l[r].operation.length;o++)l[r].name==p[1]&&l[r].operation[o]==p[0]&&(u=l[r]);e[n]={id:f.join(t.$divider),header:e[n]},"count"!=p[0]&&(e[n].format=u&&u.format?u.format:t.config.format)}return e.length&&t.view&&t.view.callEvent&&t.view.callEvent("onHeaderInit",[e]),t.config.totalColumn&&e.length&&(e=(0,c.addTotalColumns)(t,e)),e.splice(0,0,{id:"name",template:"{common.treetable()} #name#",header:{text:i}}),e}function i(t){return!isNaN(parseFloat(t))}function u(t,e){var n=p;return t&&(t[e]?n=t[e]:!e&&t.$last?n=t.$last:t.$default&&(n=t.$default),n.dir&&(n.dir="desc"==n.dir?-1:1),f.extend(n,p)),n}function a(t,e,n){var r,o,i,s,l,f=[];if(Object.keys&&t.columnSort!==!1)for(n=n||0,r=t.columns[n],l=u(t.columnSort,r),s=Object.keys(e),n<t.columns.length&&(s=s.sort(function(t,e){return l.as(t,e)*l.dir})),n++,o=0;o<s.length;o++)i=s[o],f.push({key:i,data:a(t,e[i],n)});else for(i in e)f.push({key:i,data:a(t,e[i])});return f}function s(t,e){var n,r,o,i,u,a=[];for(r=0;r<e.length;r++)if(o=e[r],o.data.length){var l=s(t,o.data);for(n=!1,i=0;i<l.length;i++)u=l[i],u.splice(0,0,{name:o.key}),n||(u[0].colspan=l.length,n=!0),a.push(u)}else{var f=e[r].key.split(t.$divider);a.push([{name:e[r].key,operation:f[0],text:f[1]}])}return a}e.__esModule=!0,e.processHeader=o;var l=n(18),f=r(l),c=n(20),p={dir:1,as:function(t,e){return i(t)&&i(e)?d["int"](t,e):d.string(t,e)}},d={date:function(t,e){return t-=0,e-=0,t>e?1:t<e?-1:0},"int":function(t,e){return t=1*t,e=1*e,t>e?1:t<e?-1:0},string:function(t,e){return e?t?(t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:t<e?-1:0):-1:1}}},function(t,e){"use strict";function n(t,e){return"$webixtotal"+t.$divider+e}function r(t,e){var n,r,o=[];for(n=0;n<e.length;n++)r=t[e[n]],isNaN(parseFloat(r))||o.push(r);return o}function o(t,e){var r,o,u,a,s,l,f,c=[];if(l=e[0].header.length,l<2)return e;o=i(t,e),r=o.groups,t._pivotColumnGroups=r;for(u in r){for(a={id:n(t,u),header:[],sort:"int",width:t.config.columnWidth,format:t.config.format},s=0;s<l-1;s++)s||c.length?a.header.push(""):a.header.push({name:"total",rowspan:l-1,colspan:o.count});f=u.split(t.$divider),a.header.push({name:u,operation:f[0],text:f[1]}),c.push(a)}return e.concat(c)}function i(t,e){var n,r,o,i,u,a={},s=0;for(r=0;r<e.length;r++)u=e[r].id.split(t.$divider),o=u.pop(),i=u.pop(),"sum"!=i&&"sumOnly"==t.config.totalColumn||(n=i+t.$divider+o,a[n]||(s++,a[n]={operation:i,ids:[],format:e.format}),a[n].ids.push(e[r].id));return{groups:a,count:s}}function u(t,e){var o=t._pivotColumnGroups;if(o){var i=void 0,a=void 0,s=void 0,l=void 0;for(l in o)for(i=o[l],s=i.ids,a=0;a<e.length;a++){var f=void 0,c=n(t,l),p="",d=r(e[a],s);d.length&&(f=t._pivotOperations.getTotal(l.split(t.$divider)[0]))&&(p=f.call(t,d,c,e[a])),e[a][c]=p,e[a].data&&(e[a].data=u(t,e[a].data))}}return e}e.__esModule=!0,e.addTotalColumns=o,e.addTotalData=u},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n){var r,o,u,s;for(o=1;o<e.length;o++){r=null,u=e[o].id.split(t.$divider),s=u[u.length-2],"sumOnly"==t.config.footer&&"sum"!=s&&(r=" ");var f=t._pivotOperations.getTotal(s);if(!r&&f){var c=t._pivotOperations.getTotalOptions(s),p=i(n,e[o].id,f,c&&c.leavesOnly);r={$pivotValue:p,$pivotOperation:s}}else r=" ";e[o].footer=r,"object"==a(t.config.footer)&&l.extend(e[o].footer,t.config.footer,!0)}}function i(t,e,n,r){var o,i,a=[],s=[];for(t=u(t,r),o=0;o<t.length;o++)i=t[o][e],isNaN(parseFloat(i))||(s.push(1*i),a.push(t[o]));return n(s,e,a)}function u(t,e,n){n||(n=[]);for(var r=0;r<t.length;r++)e&&t[r].data?u(t[r].data,e,n):n.push(t[r]);return n}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.addFooter=o;var s=n(18),l=r(s)},function(t,e){"use strict";function n(t,e,n){var o,u,a,s,l,f,c,p=e.header;for(o=0;o<p.length;o++){if(a=p[o],f=a.split(e.divider),l=f[f.length-2],c=t[a],s=e.operations.getOption(l,"leavesOnly"),u=e.operations.getOption(l,"ids"),s&&t.data&&(c=[],r(t.data,a,c)),c){for(var d=[],h=[],v=0;v<c.length;v++){var m=c[v],y=null;"object"==("undefined"==typeof m?"undefined":i(m))&&(m=m.value,y=c[v].id),(m||"0"==m)&&(d.push(m),y&&h.push(y))}d.length?t[a]=e.operations.get(l)(d,a,t,u?h:null):t[a]=""}else t[a]="";n.count++}return t}function r(t,e,n){var o;for(o=0;o<t.length;o++)t[o].data?r(t[o].data,e,n):n.push(t[o][e])}function o(t,e){var n,r,o,i,u,a,s,l,f=e.header,c=e.max,p=e.min,d=e.values;if(!p&&!c)return t;for(t.$cellCss||(t.$cellCss={}),n=0;n<d.length;n++){for(l=d[n],i=[],u=-99999999,a=[],s=99999999,r=0;r<f.length;r++)o=f[r],isNaN(t[o])||o.indexOf(l.name)!==-1&&(c&&t[o]>u?(i=[o],u=t[o]):t[o]==u&&i.push(o),p&&t[o]<s?(a=[o],s=t[o]):t[o]==s&&a.push(o));for(r=0;r<a.length;r++)t.$cellCss[a[r]]="webix_min";for(r=0;r<i.length;r++)t.$cellCss[i[r]]="webix_max"}return t}e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.calculateItem=n,e.setMinMax=o},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n){if("object"==("undefined"==typeof t?"undefined":s(t))){for(var r=0;r<t.length;r++)if(t[r]=parseFloat(t[r]),isNaN(t[r]))return!0}else if(t=parseFloat(t),isNaN(t))return!0;return!isNaN(e)&&n(t,e)}function i(t){t=t||[];for(var e=0;e<t.length;e++){var n=t[e],r=n.fvalue;"function"==typeof r?n.func=r:n.type.indexOf("multi")>-1?n.func=c.multi:"="==r.substr(0,1)?(n.func=c.equal,r=r.substr(1)):"<>"==r.substr(0,2)?(n.func=c.not_equal,r=r.substr(2)):">="==r.substr(0,2)?(n.func=c.more_equal,r=r.substr(2)):">"==r.substr(0,1)?(n.func=c.more,r=r.substr(1)):"<="==r.substr(0,2)?(n.func=c.less_equal,r=r.substr(2)):"<"==r.substr(0,1)?(n.func=c.less,r=r.substr(1)):r.indexOf("...")>0?(n.func=c.range,r=r.split("...")):r.indexOf("..")>0?(n.func=c.range_inc,r=r.split("..")):"datepicker"==n.type?n.func=function(t,e){return t==e}:n.func=c.contains,n.fvalue=r}}function u(t){var e,n;for(t=t||[],e=0;e<t.length;e++)n=t[e].fvalue||t[e].value||"","string"==typeof n&&n.trim&&(n=n.trim()),t[e].fvalue=n}function a(t,e,n){if(t){var r=void 0,o=void 0;for(r=0;r<t.length;r++)if(o=t[r],o.fvalue){var i=n&&n[o.name]?n[o.name]:o.name;if(f.isUndefined(e[i]))return!1;var u=e[i].toString().toLowerCase(),a=o.func(o.fvalue,u);if(!a)return!1}}return!0}e.__esModule=!0,e.rules=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.setFilterValues=i,e.formatFilterValues=u,e.filterItem=a;var l=n(18),f=r(l),c=e.rules={contains:function(t,e){return e.indexOf(t.toString().toLowerCase())>=0},equal:function(t,e){return o(t,e,function(t,e){return t==e})},not_equal:function(t,e){return o(t,e,function(t,e){return t!=e})},less:function(t,e){return o(t,e,function(t,e){return e<t})},less_equal:function(t,e){return o(t,e,function(t,e){return e<=t})},more:function(t,e){return o(t,e,function(t,e){return e>t})},more_equal:function(t,e){return o(t,e,function(t,e){return e>=t})},multi:function(t,e){var n=!1;"string"==typeof t&&(t=t.split(","));for(var r=0;r<t.length;r++)n=n||e.indexOf(t[r].toString().toLowerCase())>=0;return n},range:function(t,e){return o(t,e,function(t,e){return e<t[1]&&e>=t[0]})},range_inc:function(t,e){return o(t,e,function(t,e){return e<=t[1]&&e>=t[0]})}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.Operations=void 0;var i=n(18),u=r(i),a={sum:function l(t){for(var l=0,e=0;e<t.length;e++){var n=t[e];n=parseFloat(n,10),isNaN(n)||(l+=n)}return l},count:function f(t,e,n){var f=0;if(n.data)for(var r=0;r<n.data.length;r++)f+=n.data[r][e]||0;else f=t.length;return f},max:function(t){return 1==t.length?t[0]:Math.max.apply(this,t)},min:function(t){return 1==t.length?t[0]:Math.min.apply(this,t)}},s={sum:function c(t){var e,c=0;for(e=0;e<t.length;e++)c+=t[e];return c},min:function(t){return 1==t.length?t[0]:Math.min.apply(null,t)},max:function(t){return 1==t.length?t[0]:Math.max.apply(null,t)},count:function(t){var e=s.sum.call(this,t);return e?parseInt(e,10):""}};e.Operations=function(){function t(){o(this,t),this.pull=u.extend({},a),this.options={},this.pullTotal=u.extend({},s),this.totalOptions={}}return t.prototype.add=function(t,e,n){this.pull[t]=e,n&&(this.options[t]=n)},t.prototype.addTotal=function(t,e,n){this.pullTotal[t]=e,n&&(this.totalOptions[t]=n)},t.prototype.get=function(t){return this.pull[t]||null},t.prototype.getOptions=function(t){return this.options[t]||null},t.prototype.getOption=function(t,e){return this.options[t]?this.options[t][e]:null},t.prototype.getTotal=function(t){return this.pullTotal[t]||this.pull[t]||null},t.prototype.getTotalOptions=function(t){return this.pullTotal[t]?this.totalOptions[t]||null:this.options[t]||null},t.prototype.getTotalOption=function(t,e){var n=this.getTotalOptions(t);return n?n[t][e]:null},t}()}]);